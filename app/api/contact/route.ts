import { logo } from "@/public/icons";
import { NextResponse } from "next/server";
import nodemailer from "nodemailer";
// pass : qcfg qupn odby glmr
const username = process.env.EMAIL;
const password = process.env.EMAIL_PASS;

const email = "rabindramahato2403@gmail.com";

export async function POST(req: any) {
  const transporter = nodemailer.createTransport({
    service: "gmail",
    host: "smtp.gmail.com",
    secure: false,

    auth: {
      user: username,
      pass: password,
    },
  });

  const data = await req.json();

  try {
    const mail = await transporter.sendMail({
      from: username,
      to: "mahato.rabindra.rm@gmail.com",
      replyTo: `${data.email}`,
      subject: `Website activity from ${data.email}`,
      html: `<div style="text-align: center; margin-bottom: 20px;">
        <svg width="181" height="31" viewBox="0 0 181 31" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M0.51125 24L9.47125 1.408H14.0153L22.8793 24H17.5673L10.7833 5.248H12.6073L5.72725 24H0.51125ZM5.59925 19.904V15.808H17.9193V19.904H5.59925ZM30.8833 24.32C29.4113 24.32 28.0993 23.968 26.9473 23.264C25.8166 22.56 24.9206 21.6 24.2593 20.384C23.6193 19.168 23.2993 17.7813 23.2993 16.224C23.2993 14.6667 23.6193 13.28 24.2593 12.064C24.9206 10.848 25.8166 9.888 26.9473 9.184C28.0993 8.48 29.4113 8.128 30.8833 8.128C31.9499 8.128 32.9099 8.33067 33.7633 8.736C34.6379 9.14133 35.3526 9.70667 35.9073 10.432C36.4833 11.136 36.8033 11.9467 36.8673 12.864V19.424C36.8033 20.3413 36.4939 21.1733 35.9393 21.92C35.3846 22.6453 34.6699 23.232 33.7953 23.68C32.9206 24.1067 31.9499 24.32 30.8833 24.32ZM31.7473 19.904C32.4513 19.904 33.0593 19.7547 33.5713 19.456C34.0833 19.136 34.4886 18.6987 34.7873 18.144C35.0859 17.5893 35.2353 16.9493 35.2353 16.224C35.2353 15.4987 35.0859 14.8693 34.7873 14.336C34.5099 13.7813 34.1046 13.344 33.5713 13.024C33.0593 12.704 32.4619 12.544 31.7793 12.544C31.0966 12.544 30.4886 12.704 29.9553 13.024C29.4433 13.344 29.0273 13.7813 28.7073 14.336C28.4086 14.8907 28.2593 15.52 28.2593 16.224C28.2593 16.928 28.4086 17.5573 28.7073 18.112C29.0059 18.6667 29.4219 19.104 29.9553 19.424C30.4886 19.744 31.0859 19.904 31.7473 19.904ZM39.8433 24H35.0433V19.808L35.7793 16.032L34.9473 12.256V0.768H39.8433V24ZM48.9545 24.384C48.0372 24.384 47.1305 24.2667 46.2345 24.032C45.3598 23.7973 44.5385 23.4667 43.7705 23.04C43.0238 22.592 42.3838 22.08 41.8505 21.504L44.6345 18.688C45.1465 19.2427 45.7545 19.68 46.4585 20C47.1625 20.2987 47.9305 20.448 48.7625 20.448C49.3385 20.448 49.7758 20.3627 50.0745 20.192C50.3945 20.0213 50.5545 19.7867 50.5545 19.488C50.5545 19.104 50.3625 18.816 49.9785 18.624C49.6158 18.4107 49.1465 18.2293 48.5705 18.08C47.9945 17.9093 47.3865 17.728 46.7465 17.536C46.1065 17.344 45.4985 17.0773 44.9225 16.736C44.3465 16.3947 43.8772 15.9253 43.5145 15.328C43.1518 14.7093 42.9705 13.9307 42.9705 12.992C42.9705 11.9893 43.2265 11.1253 43.7385 10.4C44.2505 9.65333 44.9758 9.06667 45.9145 8.64C46.8532 8.21333 47.9518 8 49.2105 8C50.5332 8 51.7492 8.23467 52.8585 8.704C53.9892 9.152 54.9065 9.824 55.6105 10.72L52.8265 13.536C52.3358 12.96 51.7812 12.5547 51.1625 12.32C50.5652 12.0853 49.9785 11.968 49.4025 11.968C48.8478 11.968 48.4318 12.0533 48.1545 12.224C47.8772 12.3733 47.7385 12.5973 47.7385 12.896C47.7385 13.216 47.9198 13.472 48.2825 13.664C48.6452 13.856 49.1145 14.0267 49.6905 14.176C50.2665 14.3253 50.8745 14.5067 51.5145 14.72C52.1545 14.9333 52.7625 15.2213 53.3385 15.584C53.9145 15.9467 54.3838 16.4373 54.7465 17.056C55.1092 17.6533 55.2905 18.4427 55.2905 19.424C55.2905 20.9387 54.7145 22.144 53.5625 23.04C52.4318 23.936 50.8958 24.384 48.9545 24.384Z" fill="#4087BA"/>
        <path d="M65.4348 24L56.7308 1.408H62.1068L68.7308 19.68H66.5228L73.2428 1.408H78.5548L69.7548 24H65.4348ZM84.3177 24.32C82.8884 24.32 81.6084 23.968 80.4778 23.264C79.3684 22.56 78.4831 21.6 77.8218 20.384C77.1818 19.168 76.8618 17.7813 76.8618 16.224C76.8618 14.6667 77.1818 13.28 77.8218 12.064C78.4831 10.848 79.3684 9.888 80.4778 9.184C81.6084 8.48 82.8884 8.128 84.3177 8.128C85.3631 8.128 86.3018 8.33067 87.1338 8.736C87.9871 9.14133 88.6804 9.70667 89.2138 10.432C89.7471 11.136 90.0458 11.9467 90.1098 12.864V19.584C90.0458 20.5013 89.7471 21.3227 89.2138 22.048C88.7018 22.752 88.0191 23.3067 87.1658 23.712C86.3124 24.1173 85.3631 24.32 84.3177 24.32ZM85.3098 19.904C86.3551 19.904 87.1978 19.5627 87.8378 18.88C88.4778 18.176 88.7978 17.2907 88.7978 16.224C88.7978 15.4987 88.6484 14.8587 88.3498 14.304C88.0724 13.7493 87.6671 13.3227 87.1338 13.024C86.6218 12.704 86.0244 12.544 85.3418 12.544C84.6591 12.544 84.0511 12.704 83.5178 13.024C83.0058 13.3227 82.5898 13.7493 82.2698 14.304C81.9711 14.8587 81.8218 15.4987 81.8218 16.224C81.8218 16.928 81.9711 17.5573 82.2698 18.112C82.5684 18.6667 82.9844 19.104 83.5178 19.424C84.0511 19.744 84.6484 19.904 85.3098 19.904ZM88.6058 24V19.808L89.3418 16.032L88.6058 12.256V8.448H93.4058V24H88.6058ZM107.125 24V15.136C107.125 14.3253 106.869 13.6747 106.357 13.184C105.866 12.672 105.237 12.416 104.469 12.416C103.936 12.416 103.466 12.5333 103.061 12.768C102.656 12.9813 102.336 13.3013 102.101 13.728C101.866 14.1333 101.749 14.6027 101.749 15.136L99.861 14.208C99.861 12.992 100.128 11.9253 100.661 11.008C101.194 10.0907 101.93 9.38667 102.869 8.896C103.829 8.384 104.906 8.128 106.101 8.128C107.253 8.128 108.266 8.40533 109.141 8.96C110.037 9.49333 110.741 10.208 111.253 11.104C111.765 12 112.021 12.9813 112.021 14.048V24H107.125ZM96.853 24V8.448H101.749V24H96.853ZM117.186 24V2.016H122.082V24H117.186ZM113.666 12.608V8.448H125.602V12.608H113.666ZM133.943 24.32C132.513 24.32 131.233 23.968 130.103 23.264C128.993 22.56 128.108 21.6 127.447 20.384C126.807 19.168 126.487 17.7813 126.487 16.224C126.487 14.6667 126.807 13.28 127.447 12.064C128.108 10.848 128.993 9.888 130.103 9.184C131.233 8.48 132.513 8.128 133.943 8.128C134.988 8.128 135.927 8.33067 136.759 8.736C137.612 9.14133 138.305 9.70667 138.839 10.432C139.372 11.136 139.671 11.9467 139.735 12.864V19.584C139.671 20.5013 139.372 21.3227 138.839 22.048C138.327 22.752 137.644 23.3067 136.791 23.712C135.937 24.1173 134.988 24.32 133.943 24.32ZM134.935 19.904C135.98 19.904 136.823 19.5627 137.463 18.88C138.103 18.176 138.423 17.2907 138.423 16.224C138.423 15.4987 138.273 14.8587 137.975 14.304C137.697 13.7493 137.292 13.3227 136.759 13.024C136.247 12.704 135.649 12.544 134.967 12.544C134.284 12.544 133.676 12.704 133.143 13.024C132.631 13.3227 132.215 13.7493 131.895 14.304C131.596 14.8587 131.447 15.4987 131.447 16.224C131.447 16.928 131.596 17.5573 131.895 18.112C132.193 18.6667 132.609 19.104 133.143 19.424C133.676 19.744 134.273 19.904 134.935 19.904ZM138.231 24V19.808L138.967 16.032L138.231 12.256V8.448H143.031V24H138.231ZM153.07 30.976C151.363 30.976 149.859 30.6773 148.558 30.08C147.278 29.504 146.265 28.6827 145.518 27.616L148.526 24.608C149.081 25.2693 149.699 25.7707 150.382 26.112C151.086 26.4533 151.929 26.624 152.91 26.624C154.126 26.624 155.075 26.3253 155.758 25.728C156.462 25.1307 156.814 24.288 156.814 23.2V19.232L157.646 15.84L156.91 12.448V8.448H161.71V23.072C161.71 24.672 161.337 26.0587 160.59 27.232C159.843 28.4053 158.819 29.3227 157.518 29.984C156.217 30.6453 154.734 30.976 153.07 30.976ZM152.846 23.52C151.417 23.52 150.147 23.1787 149.038 22.496C147.929 21.8133 147.054 20.8853 146.414 19.712C145.774 18.5387 145.454 17.2373 145.454 15.808C145.454 14.3573 145.774 13.056 146.414 11.904C147.054 10.7307 147.929 9.81333 149.038 9.152C150.147 8.46933 151.417 8.128 152.846 8.128C153.913 8.128 154.862 8.33067 155.694 8.736C156.547 9.12 157.23 9.67467 157.742 10.4C158.275 11.104 158.574 11.9253 158.638 12.864V18.784C158.574 19.7013 158.275 20.5227 157.742 21.248C157.23 21.952 156.547 22.5067 155.694 22.912C154.841 23.3173 153.891 23.52 152.846 23.52ZM153.774 19.168C154.457 19.168 155.043 19.0187 155.534 18.72C156.046 18.4213 156.43 18.0267 156.686 17.536C156.963 17.024 157.102 16.448 157.102 15.808C157.102 15.168 156.963 14.592 156.686 14.08C156.43 13.568 156.046 13.1627 155.534 12.864C155.043 12.5653 154.457 12.416 153.774 12.416C153.113 12.416 152.526 12.5653 152.014 12.864C151.502 13.1627 151.107 13.568 150.83 14.08C150.553 14.592 150.414 15.168 150.414 15.808C150.414 16.4053 150.553 16.9707 150.83 17.504C151.107 18.016 151.491 18.4213 151.982 18.72C152.494 19.0187 153.091 19.168 153.774 19.168ZM172.845 24.352C171.16 24.352 169.656 24.0107 168.334 23.328C167.032 22.624 166.008 21.6533 165.262 20.416C164.515 19.1787 164.142 17.7813 164.142 16.224C164.142 14.6667 164.504 13.28 165.23 12.064C165.976 10.8267 166.979 9.856 168.238 9.152C169.496 8.448 170.915 8.096 172.494 8.096C174.03 8.096 175.384 8.42667 176.558 9.088C177.731 9.74933 178.648 10.6667 179.31 11.84C179.992 13.0133 180.333 14.3573 180.333 15.872C180.333 16.1493 180.312 16.448 180.27 16.768C180.248 17.0667 180.195 17.4187 180.11 17.824L166.702 17.856V14.496L178.03 14.464L175.918 15.872C175.896 14.976 175.758 14.24 175.502 13.664C175.246 13.0667 174.862 12.6187 174.35 12.32C173.859 12 173.251 11.84 172.526 11.84C171.758 11.84 171.086 12.0213 170.51 12.384C169.955 12.7253 169.518 13.216 169.198 13.856C168.899 14.496 168.75 15.2747 168.75 16.192C168.75 17.1093 168.91 17.8987 169.23 18.56C169.571 19.2 170.04 19.7013 170.638 20.064C171.256 20.4053 171.982 20.576 172.814 20.576C173.582 20.576 174.275 20.448 174.894 20.192C175.512 19.9147 176.056 19.5093 176.526 18.976L179.214 21.664C178.446 22.56 177.518 23.232 176.43 23.68C175.342 24.128 174.147 24.352 172.845 24.352Z" fill="white"/>
        </svg>
        
      </div>

      <table style="border-collapse: collapse; width: 100%;">
          <tr>
              <td style="padding: 10px; text-align: left; vertical-align: top; width: 25%;"><strong>Name:</strong></td>
              <td style="padding: 10px; text-align: left; vertical-align: top; width: 25%;"><strong>Number:</strong></td>
              <td style="padding: 10px; text-align: left; vertical-align: top; width: 25%;"><strong>Query:</strong></td>
              <td style="padding: 10px; text-align: left; vertical-align: top; width: 25%;"><strong>Budget:</strong></td>
          </tr>
          <tr>
              <td style="padding: 10px; text-align: left; vertical-align: top; width: 25%;">${data.username}</td>
              <td style="padding: 10px; text-align: left; vertical-align: top; width: 25%;">${data.email}</td>
              <td style="padding: 10px; text-align: left; vertical-align: top; width: 25%;">${data.query}</td>
              <td style="padding: 10px; text-align: left; vertical-align: top; width: 25%;">${data.budget}</td>
          </tr>
      </table>

      <div style="text-align: center; font-size: 12px; color: #999; margin-top: 20px;">
          &copy; 2024 Your AdsVantage. All Rights Reserved.
      </div>`,
    });

    return NextResponse.json({ message: "Success: email was sent" });
  } catch (error) {
    console.log(error);
    return NextResponse.json({ message: "COULD NOT SEND MESSAGE" });
  }
}
